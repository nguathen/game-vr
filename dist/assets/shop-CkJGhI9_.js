import{a as f}from"./auth-manager-Cgi3t6lo.js";import{i as s}from"./iap-manager-BjUsMUVa.js";function h(o){const n=document.getElementById("transition");n?(n.classList.add("active"),setTimeout(()=>{window.location.href=o},300)):window.location.href=o}async function C(){const o=document.getElementById("shop-coins"),n=document.getElementById("product-list"),i=f.profile;o.textContent=`Coins: ${(i==null?void 0:i.coins)||0}`,n.textContent="Loading products...",await s.init(),n.textContent="",s.products.forEach(e=>{const a=document.createElement("div");a.className="product-item";const d=e.type==="non_consumable"&&s.isOwned(e.id),c=document.createElement("div");c.className="product-info";const l=document.createElement("div");l.className="product-name",l.textContent=e.name;const m=document.createElement("div");m.className="product-desc",m.textContent=e.description,c.appendChild(l),c.appendChild(m);const r=s.getDisplayPrice(e),t=document.createElement("button");t.className="btn-buy",t.disabled=d,t.textContent=d?"Owned":r,d||t.addEventListener("click",async()=>{var p;t.disabled=!0,t.textContent="...";try{await s.purchase(e.id),o.textContent=`Coins: ${((p=f.profile)==null?void 0:p.coins)||0}`,e.type==="non_consumable"?(t.textContent="Owned",u(`Unlocked: ${e.name}`,"success")):(t.disabled=!1,t.textContent=r,u(`+${e.coinAmount} coins!`,"success"))}catch{t.disabled=!1,t.textContent=r,u("Purchase failed. Try again.","error")}}),a.appendChild(c),a.appendChild(t),n.appendChild(a)}),document.getElementById("btn-back").addEventListener("click",()=>{h("./index.html")})}function u(o,n="info"){const i=document.querySelector(".notification");i&&i.remove();const e=document.createElement("div");e.className=`notification notification-${n}`,e.textContent=o,document.body.appendChild(e),setTimeout(()=>e.classList.add("show"),10),setTimeout(()=>{e.classList.remove("show"),setTimeout(()=>e.remove(),300)},3e3)}f.waitReady().then(()=>{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",C):C()});
