import{a as f}from"./auth-manager-Cgi3t6lo.js";import{a as l}from"./audio-manager-BRKiiRd-.js";const h=[{id:"look",step:"Step 1 / 5",instruction:"Look around by moving your head or mouse",hint:"Rotate the camera to continue"},{id:"shoot",step:"Step 2 / 5",instruction:"Aim at the target and click (or pull the trigger) to shoot!",hint:"Hit the green target"},{id:"types",step:"Step 3 / 5",instruction:"Different target types give different points",hint:"Hit each target as it appears"},{id:"combo",step:"Step 4 / 5",instruction:"Hit targets quickly for combo multiplier!",hint:"Hit all 3 targets without pausing"},{id:"done",step:"Step 5 / 5",instruction:"You're ready! Let's go!",hint:""}];let m=0,u=null,c=0,d=0;function A(){const e=document.getElementById("transition");e.classList.add("active"),requestAnimationFrame(()=>e.classList.remove("active")),l.loadSettings(),window.__weaponSystem={current:{id:"pistol",damage:1,fireRate:.25,pellets:1,spread:0,laserColor:"#ff4444",laserOpacity:.7},currentId:"pistol"},b(0),E(0),document.getElementById("btn-start").addEventListener("click",()=>{e.classList.add("active"),setTimeout(()=>{window.location.href="./index.html"},300)})}function b(e){const n=h[e];document.getElementById("tutorial-step").textContent=n.step,document.getElementById("tutorial-instruction").textContent=n.instruction,document.getElementById("tutorial-hint").textContent=n.hint}function p(){if(m++,c=0,m>=h.length-1){I();return}l.playSelect(),b(m),E(m)}function I(){document.getElementById("tutorial-overlay").classList.add("hidden"),document.getElementById("tutorial-complete").classList.remove("hidden"),l.playLevelUp(),f.saveProfile({tutorialCompleted:!0})}function E(e){const n=h[e];if(n.id==="look"){const a=document.getElementById("camera");u=null;const o=()=>{const t=a.getAttribute("rotation");if(!u){u={x:t.x,y:t.y},requestAnimationFrame(o);return}const r=Math.abs(t.y-u.y),g=Math.abs(t.x-u.x);if(r>60||g>40){p();return}requestAnimationFrame(o)};requestAnimationFrame(o)}n.id==="shoot"&&(d=1,s("standard","#2ed573",0,2,-5)),n.id==="types"&&(d=3,document.getElementById("tutorial-hint").textContent="Green = +10 points. Hit it!",s("standard","#2ed573",-2,2,-6,()=>{document.getElementById("tutorial-hint").textContent="Gold = +50 bonus! Hit it!",s("bonus","#ffd700",0,2.5,-6,()=>{document.getElementById("tutorial-hint").textContent="Red = Decoy! Avoid these!",S(2,2,-6)})})),n.id==="combo"&&(d=3,document.getElementById("tutorial-hint").textContent="Hit 3 targets quickly!",s("standard","#2ed573",-2,2,-5),setTimeout(()=>s("standard","#1e90ff",0,2.5,-6),200),setTimeout(()=>s("standard","#a855f7",2,2,-5),400))}function s(e,n,a,o,t,r){const g=document.getElementById("target-container"),i=document.createElement("a-sphere");i.setAttribute("class","target"),i.setAttribute("radius",e==="bonus"?"0.25":"0.3"),i.setAttribute("material",`shader: flat; color: ${n}`),i.setAttribute("position",`${a} ${o} ${t}`),i.setAttribute("target-hit",`hp: 1; targetType: ${e}`),i.setAttribute("animation__spawn",{property:"scale",from:"0 0 0",to:"1 1 1",dur:300,easing:"easeOutElastic"}),i.setAttribute("animation__float",{property:"position",to:`${a} ${o+.3} ${t}`,dur:1500,easing:"easeInOutSine",loop:!0,dir:"alternate"}),i.addEventListener("destroyed",()=>{c++,l.playHit(),r?setTimeout(r,500):c>=d&&setTimeout(()=>p(),600)}),g.appendChild(i),l.playSpawn()}function S(e,n,a){const o=document.getElementById("target-container"),t=document.createElement("a-sphere");t.setAttribute("class","target"),t.setAttribute("radius","0.3"),t.setAttribute("material","shader: flat; color: #882222"),t.setAttribute("position",`${e} ${n} ${a}`),t.setAttribute("target-hit","hp: 1; targetType: decoy"),t.setAttribute("animation__spawn",{property:"scale",from:"0 0 0",to:"1 1 1",dur:300,easing:"easeOutElastic"});const r=setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),c=d,p()},3e3);t.addEventListener("destroyed",()=>{clearTimeout(r),l.playMiss(),document.getElementById("tutorial-hint").textContent="Oops! Red targets lose points. Avoid them!",setTimeout(()=>{c=d,p()},1500)}),o.appendChild(t)}let y=!1;f.waitReady().then(()=>{const e=()=>{y||(y=!0,A())};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e):e()});
