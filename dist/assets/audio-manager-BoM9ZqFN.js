class u{constructor(){this._ctx=null,this._enabled=!0,this._volume=.8}loadSettings(){try{const n=localStorage.getItem("vr_quest_player_v2");if(n){const t=JSON.parse(n).settings||{};this._enabled=t.sfx!==!1,this._volume=(t.volume!==void 0?t.volume:80)/100}}catch{}}_getCtx(){return this._ctx||(this._ctx=new(window.AudioContext||window.webkitAudioContext),this._masterGain=this._ctx.createGain(),this._masterGain.connect(this._ctx.destination),this._masterGain.gain.value=this._volume),this._ctx.state==="suspended"&&this._ctx.resume(),this._masterGain.gain.value=this._volume,this._ctx}get destination(){var n;return this._masterGain||((n=this._ctx)==null?void 0:n.destination)}_pitchVar(){return .9+Math.random()*.2}playHit(){if(!this._enabled)return;const n=this._getCtx(),e=n.currentTime,t=this._pitchVar(),a=n.createOscillator(),i=n.createGain();a.type="sine",a.frequency.setValueAtTime(880*t,e),a.frequency.exponentialRampToValueAtTime(1760*t,e+.05),i.gain.setValueAtTime(.3,e),i.gain.exponentialRampToValueAtTime(.001,e+.15),a.connect(i).connect(this.destination),a.start(e),a.stop(e+.15)}playCombo(n){if(!this._enabled)return;const e=this._getCtx(),t=e.currentTime,a=660+n*110,i=e.createOscillator(),s=e.createGain();i.type="square",i.frequency.setValueAtTime(a,t),i.frequency.exponentialRampToValueAtTime(a*1.5,t+.08),s.gain.setValueAtTime(.15,t),s.gain.exponentialRampToValueAtTime(.001,t+.2),i.connect(s).connect(this.destination),i.start(t),i.stop(t+.2)}playMiss(){if(!this._enabled)return;const n=this._getCtx(),e=n.currentTime,t=n.createOscillator(),a=n.createGain();t.type="sine",t.frequency.setValueAtTime(300,e),t.frequency.exponentialRampToValueAtTime(100,e+.15),a.gain.setValueAtTime(.15,e),a.gain.exponentialRampToValueAtTime(.001,e+.2),t.connect(a).connect(this.destination),t.start(e),t.stop(e+.2)}playSpawn(){if(!this._enabled)return;const n=this._getCtx(),e=n.currentTime,t=n.createOscillator(),a=n.createGain();t.type="sine",t.frequency.setValueAtTime(400,e),t.frequency.exponentialRampToValueAtTime(600,e+.06),a.gain.setValueAtTime(.1,e),a.gain.exponentialRampToValueAtTime(.001,e+.1),t.connect(a).connect(this.destination),t.start(e),t.stop(e+.1)}playGameOver(){if(!this._enabled)return;const n=this._getCtx(),e=n.currentTime;[440,370,330,262].forEach((t,a)=>{const i=n.createOscillator(),s=n.createGain();i.type="triangle";const c=e+a*.2;i.frequency.setValueAtTime(t,c),s.gain.setValueAtTime(.2,c),s.gain.exponentialRampToValueAtTime(.001,c+.3),i.connect(s).connect(this.destination),i.start(c),i.stop(c+.3)})}playCountdown(){if(!this._enabled)return;const n=this._getCtx(),e=n.currentTime,t=n.createOscillator(),a=n.createGain();t.type="square",t.frequency.setValueAtTime(440,e),a.gain.setValueAtTime(.1,e),a.gain.exponentialRampToValueAtTime(.001,e+.1),t.connect(a).connect(this.destination),t.start(e),t.stop(e+.1)}playGo(){if(!this._enabled)return;const n=this._getCtx(),e=n.currentTime,t=n.createOscillator(),a=n.createGain();t.type="square",t.frequency.setValueAtTime(880,e),a.gain.setValueAtTime(.15,e),a.gain.exponentialRampToValueAtTime(.001,e+.2),t.connect(a).connect(this.destination),t.start(e),t.stop(e+.2)}playWeaponFire(n){if(!this._enabled)return;const e=this._getCtx(),t=e.currentTime,a=this._pitchVar();if(n==="shotgun"){const i=e.sampleRate*.08,s=e.createBuffer(1,i,e.sampleRate),c=s.getChannelData(0);for(let l=0;l<i;l++)c[l]=(Math.random()*2-1)*.4;const o=e.createBufferSource();o.buffer=s;const r=e.createGain();r.gain.setValueAtTime(.3,t),r.gain.exponentialRampToValueAtTime(.001,t+.12),o.connect(r).connect(this.destination),o.start(t)}else if(n==="sniper"){const i=e.createOscillator(),s=e.createGain();i.type="sawtooth",i.frequency.setValueAtTime(1200*a,t),i.frequency.exponentialRampToValueAtTime(200*a,t+.15),s.gain.setValueAtTime(.25,t),s.gain.exponentialRampToValueAtTime(.001,t+.25),i.connect(s).connect(this.destination),i.start(t),i.stop(t+.25)}else{const i=e.createOscillator(),s=e.createGain();i.type="square",i.frequency.setValueAtTime(600*a,t),i.frequency.exponentialRampToValueAtTime(200*a,t+.06),s.gain.setValueAtTime(.2,t),s.gain.exponentialRampToValueAtTime(.001,t+.08),i.connect(s).connect(this.destination),i.start(t),i.stop(t+.08)}}playLevelUp(){if(!this._enabled)return;const n=this._getCtx(),e=n.currentTime;[523,659,784,1047].forEach((t,a)=>{const i=n.createOscillator(),s=n.createGain();i.type="sine";const c=e+a*.12;i.frequency.setValueAtTime(t,c),s.gain.setValueAtTime(.2,c),s.gain.exponentialRampToValueAtTime(.001,c+.25),i.connect(s).connect(this.destination),i.start(c),i.stop(c+.25)})}playLifeLost(){if(!this._enabled)return;const n=this._getCtx(),e=n.currentTime,t=n.createOscillator(),a=n.createGain();t.type="sawtooth",t.frequency.setValueAtTime(400,e),t.frequency.exponentialRampToValueAtTime(150,e+.3),a.gain.setValueAtTime(.2,e),a.gain.exponentialRampToValueAtTime(.001,e+.35),t.connect(a).connect(this.destination),t.start(e),t.stop(e+.35)}playAchievement(){if(!this._enabled)return;const n=this._getCtx(),e=n.currentTime;[784,988,1175,1318].forEach((t,a)=>{const i=n.createOscillator(),s=n.createGain();i.type="sine";const c=e+a*.1;i.frequency.setValueAtTime(t,c),s.gain.setValueAtTime(.15,c),s.gain.exponentialRampToValueAtTime(.001,c+.2),i.connect(s).connect(this.destination),i.start(c),i.stop(c+.2)})}playComboSound(n){if(!this._enabled)return;const e=this._getCtx(),t=e.currentTime,a=440+Math.min(n,10)*80;for(let i=0;i<Math.min(n,4);i++){const s=e.createOscillator(),c=e.createGain();s.type="sine";const o=t+i*.06;s.frequency.setValueAtTime(a+i*110,o),c.gain.setValueAtTime(.12,o),c.gain.exponentialRampToValueAtTime(.001,o+.15),s.connect(c).connect(this.destination),s.start(o),s.stop(o+.15)}}playCountdownBeep(){if(!this._enabled)return;const n=this._getCtx(),e=n.currentTime,t=n.createOscillator(),a=n.createGain();t.type="sine",t.frequency.setValueAtTime(660,e),a.gain.setValueAtTime(.15,e),a.gain.exponentialRampToValueAtTime(.001,e+.12),t.connect(a).connect(this.destination),t.start(e),t.stop(e+.12)}playSelect(){if(!this._enabled)return;const n=this._getCtx(),e=n.currentTime,t=n.createOscillator(),a=n.createGain();t.type="sine",t.frequency.setValueAtTime(660,e),a.gain.setValueAtTime(.1,e),a.gain.exponentialRampToValueAtTime(.001,e+.08),t.connect(a).connect(this.destination),t.start(e),t.stop(e+.08)}}const p=new u;export{p as a};
