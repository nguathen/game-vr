class p{constructor(){this._ctx=null,this._enabled=!0,this._volume=.8}loadSettings(){try{const n=localStorage.getItem("vr_quest_player_v2");if(n){const e=JSON.parse(n).settings||{};this._enabled=e.sfx!==!1,this._volume=(e.volume!==void 0?e.volume:80)/100}}catch{}}_getCtx(){return this._ctx||(this._ctx=new(window.AudioContext||window.webkitAudioContext),this._masterGain=this._ctx.createGain(),this._masterGain.connect(this._ctx.destination),this._masterGain.gain.value=this._volume),this._ctx.state==="suspended"&&this._ctx.resume(),this._masterGain.gain.value=this._volume,this._ctx}get destination(){var n;return this._masterGain||((n=this._ctx)==null?void 0:n.destination)}_pitchVar(){return .9+Math.random()*.2}playHit(){if(!this._enabled)return;const n=this._getCtx(),t=n.currentTime,e=this._pitchVar(),i=n.createOscillator(),a=n.createGain();i.type="sine",i.frequency.setValueAtTime(880*e,t),i.frequency.exponentialRampToValueAtTime(1760*e,t+.05),a.gain.setValueAtTime(.3,t),a.gain.exponentialRampToValueAtTime(.001,t+.15),i.connect(a).connect(this.destination),i.start(t),i.stop(t+.15)}playCombo(n){if(!this._enabled)return;const t=this._getCtx(),e=t.currentTime,i=660+n*110,a=t.createOscillator(),s=t.createGain();a.type="square",a.frequency.setValueAtTime(i,e),a.frequency.exponentialRampToValueAtTime(i*1.5,e+.08),s.gain.setValueAtTime(.15,e),s.gain.exponentialRampToValueAtTime(.001,e+.2),a.connect(s).connect(this.destination),a.start(e),a.stop(e+.2)}playMiss(){if(!this._enabled)return;const n=this._getCtx(),t=n.currentTime,e=n.createOscillator(),i=n.createGain();e.type="sine",e.frequency.setValueAtTime(300,t),e.frequency.exponentialRampToValueAtTime(100,t+.15),i.gain.setValueAtTime(.15,t),i.gain.exponentialRampToValueAtTime(.001,t+.2),e.connect(i).connect(this.destination),e.start(t),e.stop(t+.2)}playSpawn(){if(!this._enabled)return;const n=this._getCtx(),t=n.currentTime,e=n.createOscillator(),i=n.createGain();e.type="sine",e.frequency.setValueAtTime(400,t),e.frequency.exponentialRampToValueAtTime(600,t+.06),i.gain.setValueAtTime(.1,t),i.gain.exponentialRampToValueAtTime(.001,t+.1),e.connect(i).connect(this.destination),e.start(t),e.stop(t+.1)}playGameOver(){if(!this._enabled)return;const n=this._getCtx(),t=n.currentTime;[440,370,330,262].forEach((e,i)=>{const a=n.createOscillator(),s=n.createGain();a.type="triangle";const c=t+i*.2;a.frequency.setValueAtTime(e,c),s.gain.setValueAtTime(.2,c),s.gain.exponentialRampToValueAtTime(.001,c+.3),a.connect(s).connect(this.destination),a.start(c),a.stop(c+.3)})}playCountdown(){if(!this._enabled)return;const n=this._getCtx(),t=n.currentTime,e=n.createOscillator(),i=n.createGain();e.type="square",e.frequency.setValueAtTime(440,t),i.gain.setValueAtTime(.1,t),i.gain.exponentialRampToValueAtTime(.001,t+.1),e.connect(i).connect(this.destination),e.start(t),e.stop(t+.1)}playGo(){if(!this._enabled)return;const n=this._getCtx(),t=n.currentTime,e=n.createOscillator(),i=n.createGain();e.type="square",e.frequency.setValueAtTime(880,t),i.gain.setValueAtTime(.15,t),i.gain.exponentialRampToValueAtTime(.001,t+.2),e.connect(i).connect(this.destination),e.start(t),e.stop(t+.2)}playWeaponFire(n){if(!this._enabled)return;const t=this._getCtx(),e=t.currentTime,i=this._pitchVar();if(n==="shotgun"){const a=t.sampleRate*.08,s=t.createBuffer(1,a,t.sampleRate),c=s.getChannelData(0);for(let r=0;r<a;r++)c[r]=(Math.random()*2-1)*.4;const o=t.createBufferSource();o.buffer=s;const l=t.createGain();l.gain.setValueAtTime(.3,e),l.gain.exponentialRampToValueAtTime(.001,e+.12),o.connect(l).connect(this.destination),o.start(e)}else if(n==="sniper"){const a=t.createOscillator(),s=t.createGain();a.type="sawtooth",a.frequency.setValueAtTime(1200*i,e),a.frequency.exponentialRampToValueAtTime(200*i,e+.15),s.gain.setValueAtTime(.25,e),s.gain.exponentialRampToValueAtTime(.001,e+.25),a.connect(s).connect(this.destination),a.start(e),a.stop(e+.25)}else{const a=t.createOscillator(),s=t.createGain();a.type="square",a.frequency.setValueAtTime(600*i,e),a.frequency.exponentialRampToValueAtTime(200*i,e+.06),s.gain.setValueAtTime(.2,e),s.gain.exponentialRampToValueAtTime(.001,e+.08),a.connect(s).connect(this.destination),a.start(e),a.stop(e+.08)}}playLevelUp(){if(!this._enabled)return;const n=this._getCtx(),t=n.currentTime;[523,659,784,1047].forEach((e,i)=>{const a=n.createOscillator(),s=n.createGain();a.type="sine";const c=t+i*.12;a.frequency.setValueAtTime(e,c),s.gain.setValueAtTime(.2,c),s.gain.exponentialRampToValueAtTime(.001,c+.25),a.connect(s).connect(this.destination),a.start(c),a.stop(c+.25)})}playLifeLost(){if(!this._enabled)return;const n=this._getCtx(),t=n.currentTime,e=n.createOscillator(),i=n.createGain();e.type="sawtooth",e.frequency.setValueAtTime(400,t),e.frequency.exponentialRampToValueAtTime(150,t+.3),i.gain.setValueAtTime(.2,t),i.gain.exponentialRampToValueAtTime(.001,t+.35),e.connect(i).connect(this.destination),e.start(t),e.stop(t+.35)}playAchievement(){if(!this._enabled)return;const n=this._getCtx(),t=n.currentTime;[784,988,1175,1318].forEach((e,i)=>{const a=n.createOscillator(),s=n.createGain();a.type="sine";const c=t+i*.1;a.frequency.setValueAtTime(e,c),s.gain.setValueAtTime(.15,c),s.gain.exponentialRampToValueAtTime(.001,c+.2),a.connect(s).connect(this.destination),a.start(c),a.stop(c+.2)})}playComboSound(n){if(!this._enabled)return;const t=this._getCtx(),e=t.currentTime,i=440+Math.min(n,10)*80;for(let a=0;a<Math.min(n,4);a++){const s=t.createOscillator(),c=t.createGain();s.type="sine";const o=e+a*.06;s.frequency.setValueAtTime(i+a*110,o),c.gain.setValueAtTime(.12,o),c.gain.exponentialRampToValueAtTime(.001,o+.15),s.connect(c).connect(this.destination),s.start(o),s.stop(o+.15)}}playCountdownBeep(){if(!this._enabled)return;const n=this._getCtx(),t=n.currentTime,e=n.createOscillator(),i=n.createGain();e.type="sine",e.frequency.setValueAtTime(660,t),i.gain.setValueAtTime(.15,t),i.gain.exponentialRampToValueAtTime(.001,t+.12),e.connect(i).connect(this.destination),e.start(t),e.stop(t+.12)}playSlowMoHit(){if(!this._enabled)return;const n=this._getCtx(),t=n.currentTime,e=n.createOscillator(),i=n.createGain();e.type="sine",e.frequency.setValueAtTime(120,t),e.frequency.exponentialRampToValueAtTime(40,t+.4),i.gain.setValueAtTime(.25,t),i.gain.exponentialRampToValueAtTime(.001,t+.5),e.connect(i).connect(this.destination),e.start(t),e.stop(t+.5);const a=n.createOscillator(),s=n.createGain();a.type="sine",a.frequency.setValueAtTime(1200,t),a.frequency.exponentialRampToValueAtTime(600,t+.3),s.gain.setValueAtTime(.06,t),s.gain.exponentialRampToValueAtTime(.001,t+.35),a.connect(s).connect(this.destination),a.start(t),a.stop(t+.35)}playPowerUp(){if(!this._enabled)return;const n=this._getCtx(),t=n.currentTime;[880,1100,1320,1760].forEach((e,i)=>{const a=n.createOscillator(),s=n.createGain();a.type="sine";const c=t+i*.06;a.frequency.setValueAtTime(e,c),s.gain.setValueAtTime(.18,c),s.gain.exponentialRampToValueAtTime(.001,c+.15),a.connect(s).connect(this.destination),a.start(c),a.stop(c+.15)})}playPowerUpEnd(){if(!this._enabled)return;const n=this._getCtx(),t=n.currentTime,e=n.createOscillator(),i=n.createGain();e.type="sine",e.frequency.setValueAtTime(660,t),e.frequency.exponentialRampToValueAtTime(330,t+.25),i.gain.setValueAtTime(.1,t),i.gain.exponentialRampToValueAtTime(.001,t+.3),e.connect(i).connect(this.destination),e.start(t),e.stop(t+.3)}playBossSpawn(){if(!this._enabled)return;const n=this._getCtx(),t=n.currentTime,e=n.createOscillator(),i=n.createGain();e.type="sine",e.frequency.setValueAtTime(60,t),e.frequency.exponentialRampToValueAtTime(30,t+.5),i.gain.setValueAtTime(.3,t),i.gain.exponentialRampToValueAtTime(.001,t+.6),e.connect(i).connect(this.destination),e.start(t),e.stop(t+.6)}playBossHit(){if(!this._enabled)return;const n=this._getCtx(),t=n.currentTime,e=n.createOscillator(),i=n.createGain();e.type="square",e.frequency.setValueAtTime(1400,t),e.frequency.exponentialRampToValueAtTime(800,t+.06),i.gain.setValueAtTime(.15,t),i.gain.exponentialRampToValueAtTime(.001,t+.1),e.connect(i).connect(this.destination),e.start(t),e.stop(t+.1);const a=n.createOscillator(),s=n.createGain();a.type="sine",a.frequency.setValueAtTime(200,t),s.gain.setValueAtTime(.2,t),s.gain.exponentialRampToValueAtTime(.001,t+.12),a.connect(s).connect(this.destination),a.start(t),a.stop(t+.12)}playBossKill(){if(!this._enabled)return;const n=this._getCtx(),t=n.currentTime,e=n.sampleRate*.15,i=n.createBuffer(1,e,n.sampleRate),a=i.getChannelData(0);for(let o=0;o<e;o++)a[o]=(Math.random()*2-1)*.3;const s=n.createBufferSource();s.buffer=i;const c=n.createGain();c.gain.setValueAtTime(.25,t),c.gain.exponentialRampToValueAtTime(.001,t+.2),s.connect(c).connect(this.destination),s.start(t),[440,660,880,1100].forEach((o,l)=>{const r=n.createOscillator(),m=n.createGain();r.type="sine";const u=t+.1+l*.08;r.frequency.setValueAtTime(o,u),m.gain.setValueAtTime(.15,u),m.gain.exponentialRampToValueAtTime(.001,u+.2),r.connect(m).connect(this.destination),r.start(u),r.stop(u+.2)})}playWaveClear(){if(!this._enabled)return;const n=this._getCtx(),t=n.currentTime;[523,659,784].forEach((e,i)=>{const a=n.createOscillator(),s=n.createGain();a.type="triangle";const c=t+i*.1;a.frequency.setValueAtTime(e,c),s.gain.setValueAtTime(.2,c),s.gain.exponentialRampToValueAtTime(.001,c+.3),a.connect(s).connect(this.destination),a.start(c),a.stop(c+.3)})}playSelect(){if(!this._enabled)return;const n=this._getCtx(),t=n.currentTime,e=n.createOscillator(),i=n.createGain();e.type="sine",e.frequency.setValueAtTime(660,t),i.gain.setValueAtTime(.1,t),i.gain.exponentialRampToValueAtTime(.001,t+.08),e.connect(i).connect(this.destination),e.start(t),e.stop(t+.08)}}const g=new p;export{g as a};
